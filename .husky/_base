#!/usr/bin/env bash

HAS_PNPM=true

# è°ƒè¯•ç­‰å¾…
function _wait() {
    echo -e "\033[1;32mæŒ‰ä»»æ„é”®ç»§ç»­~\033[0m"
    read -r -n 1
}

function execute() {
    local callback=$1
    if ! command pnpm -v pnpm &>/dev/null; then
        HAS_PNPM=false
        echo -e '\033[1;31mè­¦å‘ŠWarnï¼šè¯·ä½¿ç”¨pnpmä½œä¸ºåŒ…ç®¡ç†å·¥å…·ï¼Œå…·ä½“ç‰ˆæœ¬è¯¦æƒ…è¯·æŸ¥é˜…package.jsonæ–‡ä»¶ä¸‹packageManagerå­—æ®µï¼Œå·²é™çº§ä½¿ç”¨NPMï¼\033[0m'
    fi

    # æ£€æŸ¥å›è°ƒå‡½æ•°å‚æ•°æ˜¯å¦å­˜åœ¨
    if [ -n "$callback" ] && [ "$(type -t "$callback")" = function ]; then
        $callback "$2"
    fi
    # DEBUG on-offğŸ‘‡
    # _wait
}
